C51 COMPILER V9.00   DRIVER                                                                01/15/2025 09:25:08 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE DRIVER
OBJECT MODULE PLACED IN .\Debug\Driver.obj
COMPILER INVOKED BY: E:\KEIL\KEIL4\C51\BIN\C51.EXE ..\User\source\Hardware\Driver.c LARGE OMF2 BROWSE INCDIR(..\FU68xx_H
                    -ardware_Driver\Include;..\User\include) DEBUG PRINT(.\Listings\Driver.lst) OBJECT(.\Debug\Driver.obj)

line level    source

   1          /* --------------------------- (C) COPYRIGHT 2021 Fortiortech ShenZhen -----------------------------
   2              File Name      : DRIVER.c
   3              Author         : Lewis.wang
   4              Version        : V1.0
   5              Date           : 2021-12-04
   6              Description    : This file contains Driver function used for Motor Control.
   7          ----------------------------------------------------------------------------------------------------  
   8                                                 All Rights Reserved
   9          ------------------------------------------------------------------------------------------------- */
  10          #include <Myproject.h>
  11          /* -------------------------------------------------------------------------------------------------
  12              Function Name  : Driver_Init
  13              Description    : é©±åŠ¨åˆå§‹åŒ–
  14              Date           : 2021-12-04
  15              Parameter      : None
  16          ------------------------------------------------------------------------------------------------- */
  17          void Driver_Init(void)
  18          {
  19   1          DRV_ARR = PWM_VALUE_LOAD - 1;                             // è½½æ³¢é¢‘çŽ‡çš„å‘¨æœŸå€¼
  20   1          DRV_DTR = PWM_LOAD_DEADTIME - 1;                          // æ­»åŒºæ—¶é—´
  21   1          DRV_DR  = 0;
  22   1      
  23   1          DRV_CMR = 0x00;                                        
  24   1          DRV_OUT = 0x00;   
  25   1      
  26   1          ClrBit(DRV_SR , FGIE);                                    //FGä¸­æ–­ä½¿èƒ½ 0-->Disable 1-->Enable
  27   1      
  28   1          ClrBit(DRV_SR , DCIF);                                    //æ¸…é™¤DRVä¸­æ–­æ ‡å¿—ä½
  29   1      
  30   1          SetBit(DRV_SR , DCIM1);                                   //DRVæ¯”è¾ƒåŒ¹é…ä¸­æ–­æ¨¡å¼
  31   1          ClrBit(DRV_SR , DCIM0);
  32   1      
  33   1          DRV_COMR = (PWM_VALUE_LOAD >> 3);                         //è®¾ç½®DRVè®¡æ•°å™¨çš„æ¯”è¾ƒåŒ¹é…å€¼
  34   1      
  35   1          PDRV1 = 1;                                                // ä¸­æ–­ä¼˜å…ˆçº§è®¾ç½®ä¸º2ï¼Œä¼˜å…ˆçº§ä½Žä
             -ºŽFOç¡¬ä»¶è¿‡æµ
  36   1          PDRV0 = 0;
  37   1      
  38   1          SetBit(DRV_SR , DCIP);                                        //0-->1ä¸ªè®¡æ•°å‘¨æœŸäº§ç”Ÿä¸­æ–­  1-->2ä¸ªè
             -®¡æ•°å‘¨æœŸäº§ç”Ÿä¸­æ–­
  39   1      
  40   1          ClrBit(DRV_CR , FOCEN);
  41   1       
  42   1          SetBit(DRV_CR , MESEL);                                   //MESELä¸º0ï¼ŒMEæ¨¡å—å·¥ä½œåœ¨BLDCæ¨¡å¼  M
             -ESELä¸º1ï¼ŒMEæ¨¡å—å·¥ä½œåœ¨FOC/SVPWM/SPWMæ¨¡å¼
  43   1      
  44   1          SetBit(DRV_CR , DRVEN);                                       //è®¡æ•°å™¨ä½¿èƒ½  0-->Disable        1-->Enable
  45   1          ClrBit(DRV_CR , DRPE);                                        //è®¡æ•°å™¨æ¯”è¾ƒå€¼é¢„è£…è½½ä½¿èƒ½ 0-->Disab
             -le                        1-->Enable
  46   1          SetBit(DRV_CR , DRVOE);                                       //Driverè¾“å‡ºä½¿èƒ½0-->Disable               1-->Enable
  47   1          MOE=0;
  48   1      }


C51 COMPILER V9.00   DRIVER                                                                01/15/2025 09:25:08 PAGE 2   

MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     92    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
