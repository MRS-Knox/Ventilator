C51 COMPILER V9.00   ADC                                                                   01/15/2025 09:25:08 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE ADC
OBJECT MODULE PLACED IN .\Debug\ADC.obj
COMPILER INVOKED BY: E:\KEIL\KEIL4\C51\BIN\C51.EXE ..\User\source\Hardware\ADC.c LARGE OMF2 BROWSE INCDIR(..\FU68xx_Hard
                    -ware_Driver\Include;..\User\include) DEBUG PRINT(.\Listings\ADC.lst) OBJECT(.\Debug\ADC.obj)

line level    source

   1          /* --------------------------- (C) COPYRIGHT 2021 Fortiortech ShenZhen -----------------------------
   2              File Name      : ADC.c
   3              Author         : Lewis.wang
   4              Version        : V1.0
   5              Date           : 2021-12-04
   6              Description    : This file contains ADC function used for Motor Control.
   7          ----------------------------------------------------------------------------------------------------  
   8                                                 All Rights Reserved
   9          ------------------------------------------------------------------------------------------------- */
  10          #include <FU68xx_4_MCU.h>
  11          #include <Myproject.h>
  12          /* -------------------------------------------------------------------------------------------------
  13              Function Name  : ADC_Init
  14              Description    : ADC初始化配置
  15              Date           : 2021-12-04
  16              Parameter      : None
  17          ------------------------------------------------------------------------------------------------- */
  18          void ADC_Init(void)
  19          {
  20   1          SetBit(P2_AN , PIN0);                                         //AD0 P20 CH open--IU--固定
  21   1          SetBit(P2_AN , PIN3);                                         //AD1 P23 CH open--IV--固定 
  22   1          SetBit(P2_AN , PIN4);                                     //AD2 P24 CH open--DCBUS--固定
  23   1          SetBit(P2_AN , PIN5);                                         //AD3 P25 CH open
  24   1          SetBit(P2_AN , PIN7);                                         //AD4 P27 CH open--IBUS/IW--固定
  25   1          
  26   1          #if (SPEED_MODE == SREFMODE)
                  {
                      SetBit(P3_AN , PIN4);                                 //AD7 P34 CH open
                      SetBit(ADC_MASK , CH7EN);
                  }
                  #endif
  32   1          
  33   1          SetBit(ADC_MASK , CH0EN | CH1EN | CH2EN | CH3EN | CH4EN  | CH14EN);   //通道使能
  34   1          
  35   1          #if (VOLTAGEMode ==Inter_VOLTAGE)
  36   1          {
  37   2              #if (VOLTAGE_SCALE ==Ratio_6_5)
                      {
                          SetBit(ADC_CR, ADCRATIO);                         //AD14采用1/6.5分压比
                      }
                      #else
  42   2              {
  43   3                  ClrBit(ADC_CR, ADCRATIO);                         //AD14采用1/12分压比
  44   3              }
  45   2              #endif
  46   2          }
  47   1          #endif
  48   1          
  49   1          SetBit(ADC_CR , ADCALIGN);                                    //ADC数据次高位对齐使能0-->Disable   1--
             ->Enable
  50   1          ClrBit(ADC_CR , ADCIE);                                       //ADC中断使能
  51   1          SetBit(ADC_CR , ADCEN);                                   //Enable ADC0
  52   1      }
  53          
C51 COMPILER V9.00   ADC                                                                   01/15/2025 09:25:08 PAGE 2   



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     67    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
